<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 
  <mapper namespace="com.oracle.S20220601.HostStayMepper">
  		<!-- 숙소 리스트 -->
  	<select id="stayRead" parameterType="int" resultType="HostStay">
  	SELECT s.*, h.* FROM stay s, host h WHERE h.host_num = #{host_num}
                                    AND   s.host_num = #{host_num}
  	
  	</select>
  		<!-- 숙소 사진 -->
  	<select id="stayPhoto" parameterType="int" resultType="HoststayPhoto">
	  		SELECT host_photo FROM hostphoto WHERE host_num = #{host_num}
	 </select>
  		<!-- 객실  사진 -->
  	<select id="roomPhoto" parameterType="int" resultType="RoomPhoto">
  	<!-- select rp.* from room r, roomphoto rp where r.host_num=rp.host_num and r.room_num = rp.room_num and r.host_num=#{host_num} ORDER by rp.room_num -->
		select * from roomphoto where host_num=#{host_num} and room_num=#{room_num}
  	</select>
  		<!-- 객실  정보 -->
  	<select id="room" parameterType="RoomPhotoList" resultType="RoomPhotoList">
  		select * from room where host_num=#{host_num}
  	</select>
  	
  	<!-- 숙박등록 -->
  	<insert id="stayInsert" parameterType="HostStay" statementType="CALLABLE">
  	{
  		call HOSTSTAY_INSERT(
  				    #{host_num   , mode=IN   , jdbcType=INTEGER}
	   			   ,#{host_name  , mode=IN   , jdbcType=INTEGER}
	  			   ,#{mem_num  	 , mode=IN   , jdbcType=VARCHAR}
	  			   ,#{host_addr  , mode=IN   , jdbcType=VARCHAR}
	  			   ,#{host_info  , mode=IN   , jdbcType=VARCHAR}
	  			   ,#{host_code  , mode=IN   , jdbcType=INTEGER}
	  			   ,#{rev_count  , mode=IN   , jdbcType=INTEGER}
	  			   ,#{host_avg   , mode=IN   , jdbcType=FLOAT}
	  			   ,#{like_count , mode=IN   , jdbcType=INTEGER}
	  			   ,#{host_app   , mode=IN   , jdbcType=INTEGER}
	  			   ,#{convenient , mode=IN   , jdbcType=VARCHAR}
	  			   ,#{way  		 , mode=IN   , jdbcType=VARCHAR}
	  			   ,#{checkin  	 , mode=IN   , jdbcType=VARCHAR}
	  			   ,#{checkout 	 , mode=IN   , jdbcType=VARCHAR}
	  			   ,#{stay_type  , mode=IN   , jdbcType=VARCHAR}
  		)
  	}
  	</insert>
  	
  	<!-- 숙박사진등록 -->
  	<insert id="stayPhotoInsert" parameterType="String">
  	INSERT INTO hostphoto VALUES(9,SEQ_STAY_PHOTO_NUM.nextval,#{host_photo})
  	
  	</insert>
  </mapper>